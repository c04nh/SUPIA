<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./main.css">
    <script src="./main.js" defer></script>
    <title>menu</title>
</head>
<body>
    <section id="banner">
        <div class="slideList">
            <div class="slideImg"><img src="./main_image/img2.png" alt="main 이미지"></div>
            <div class="slideImg"><img src="./main_image/img1.png" alt="main 이미지"></div>
            <div class="slideImg"><img src="./main_image/img3.png" alt="main 이미지"></div>
        </div>
    </section>
    <div class="slide">
        <ul class="dot">
          <li class="on">슬라이드 버튼1번</li>
          <li>슬라이드 버튼2번</li>
          <li>슬라이드 버튼3번</li>
        </ul>
      </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        var slideCount = $(".slideImg").length;
        var currentIndex = 0;
        var slidePosition;

        setInterval(function(){
            if(currentIndex < slideCount - 1){
                currentIndex++;
            } else {
                currentIndex = 0;
            }
            slidePosition = currentIndex * (-100)+"vw";
            $(".slideList").animate({ left: slidePosition},400);
        },5000);

        $(document).ready(function() {
        slide();
        });


        // 슬라이드 
        function slide() {
        var wid = 0;
        var now_num = 0;
        var slide_length = 0;
        var auto = null;
        var $dotli = $('.dot>li');
        var $panel = $('.panel');
        var $panelLi = $panel.children('li');

        // 변수 초기화
        function init() {
            wid = $('.slide').width();
            now_num = $('.dot>li.on').index();
            slide_length = $dotli.length;
        }

        // 이벤트 묶음
        function slideEvent() {

            // 슬라이드 하단 dot버튼 클릭했을때
            $dotli.click(function() {
            now_num = $(this).index();
            slideMove();
            });

            // 이후 버튼 클릭했을때
            $('.next').click(function() {
            nextChkPlay();
            });

            // 이전 버튼 클릭했을때
            $('.prev').click(function() {
            prevChkPlay();
            });

            // 오토플레이
            autoPlay();

            // 오토플레이 멈춤
            autoPlayStop();

            // 오토플레이 재시작
            autoPlayRestart();

            // 화면크기 재설정 되었을때
            resize();
        }

        // 자동실행 함수
        function autoPlay() {
            auto = setInterval(function() {
            nextChkPlay();
            }, 5000);
        }

        // 자동실행 멈춤
        function autoPlayStop() {
            $panelLi.mouseenter(function() {
            clearInterval(auto);
            });
        }


        // 자동실행 멈췄다가 재실행
        function autoPlayRestart() {
            $panelLi.mouseleave(function() {
            auto = setInterval(function() {
                nextChkPlay();
            }, 5000);
            });
        }

        // 이전 버튼 클릭시 조건 검사후 슬라이드 무브
        function prevChkPlay() {
            if (now_num == 0) {
            now_num = slide_length - 1;
            } else {
            now_num--;
            }
            slideMove();
        }

        // 이후 버튼 클릭시 조건 검사후 슬라이드 무브
        function nextChkPlay() {
            if (now_num == slide_length - 1) {
            now_num = 0;
            } else {
            now_num++;
            }
            slideMove();
        }

        // 슬라이드 무브
        function slideMove() {
            $panel.stop().animate({
            'margin-left': -wid * now_num
            });
            $dotli.removeClass('on');
            $dotli.eq(now_num).addClass('on');
        }

        // // 화면크기 조정시 화면 재설정
        // function resize() {
        //     $(window).resize(function() {
        //     init();
        //     $panel.css({
        //         'margin-left': -wid * now_num
        //     });
        //     });
        // }
        // init();
        // slideEvent();
        // }
    </script>
    <div class="menuDiv">
        <h1>병들의 합창</h1>
        <video controls>
            <source src="main_image/bottle.mp4" type="video/mp4">
            <strong>Your browser does not support the video tag.</strong>
        </video>
        <p class="menuP">제대로 분리해야 재활용입니다.</p>
        <p class="menuP">쓰레기는 죽지 않습니다.</p>
        <p class="menuP">다만 재활용될 뿐입니다.</p>
        <p class="menuPt">- 2004년 공익광고 쓰레기 재활용 캠페인 -</p>
        
    </div>
</body>
</html>